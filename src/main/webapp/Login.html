<!DOCTYPE html>
<html lang="en">
<head>
    <link href="https://fonts.googleapis.com/css2?family=PT+Sans&display=swap" rel="stylesheet">
    <link rel="icon" href="Afbeeldingen/logo.jpeg">
    <meta charset="UTF-8">
    <title>Damsteeg Productions</title>
    <link rel="stylesheet" href="Styles/LoginStyle.css">
</head>
<header>
    <div class="container">
        <a href="Home.html">
            <img class="logoT" src="Afbeeldingen/DPtext.png" alt="Damsteeg Productions">
        </a>
        <nav>
            <ul class="nav">
                <li><a href="Home.html">Home</a></li>
                <li><a href="#Verhuur">Verhuur</a></li>
                <li><a href="Portfolio.html">Portfolio</a></li>
                <li><a href="Contact.html">Contact</a></li>
                <li><a href="#Over ons">Over ons</a></li>
            </ul>
        </nav>
    </div>

</header>
<body>
<div class="wrapper">
    <!--    <img class="logo" src="../Afbeeldingen/logo.jpeg" alt="logo Damsteeg Productions">-->
    <img class="banner" src="Afbeeldingen/banner2.jpg" alt="defqon">
</div>



<div class="homeText">

    <h2>Login</h2>
    <form id ="loginform">
        <input type="text" name="username" placeholder="Gebruikersnaam" />
        <input type="password" name="password" placeholder="Wachtwoord"/>
        <input type="button" value="login" id="login" />
    </form>
    <p></p>
    <p></p>

    <script type="text/javascript">

        function login(event) {
            var formData = new FormData(document.querySelector("#loginform"));
            var encData = new URLSearchParams(formData.entries());

            fetch("restservices/authentication", {method: 'POST', body: encData})
                .then(function (response) {
                    if(response.ok) {
                        console.log("inloggen gelukt");
                        location.replace("Home.html")
                        alert("Succesvol Ingelogd")
                        return response.json();
                    }
                    else throw "Wrong username/password";

                })
                .then(myJson=> window.sessionStorage.setItem("myJWT", myJson.JWT))
                .catch(error => console.log(error));
        }
        document.querySelector("#login").addEventListener("click", login);
    </script>
</div>





<div class="fContact">Interesse?<br>Neem vrijblijvend contact op.</div>
<div class="fCtel">Telefoon: +31(0)612345678
    <div class="fCmail">E-mail: damsteegwebsite@gmail.com</div>
    <div class="fCinfo"><li><a href="#contact">Meer informatie</a></li>.</div></div>


</body>
</html>